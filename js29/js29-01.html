<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>번외) 1. 할 일 목록</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap");
      html{
        background-color: white;
        background-image: url('../img/green-background-1152632.png');
        background-size: cover;
        background-position: center;
      }
      body{

        font-family: "Gowun Dodum", sans-serif;
        box-shadow: 5px 5px 15px 5px rgba(0,0,0,0.6);
        max-width: 1000px;
        text-align: center;
        margin: 0 auto;
        height: 100vh;
        background-color: rgb(103, 226, 86);
        color:white;
      }
      .check-ok {
        text-decoration: line-through;
        color: gray;
      }
      .header h1{
        text-shadow: 1px 1px 10px greenyellow;
      }


      .header{
        background: rgb(11, 150, 46);
        box-shadow: 0 10px 8px 10px rgba(0, 0, 0, 0.605);
        padding: 20px;
   
      }

      .header h1::after{
        content: "--- ";
        color:transparent;
        background-image: url('../img/grass-854_512.gif');
        background-position: center;
        background-size: cover;
      }

      .header button{
        cursor: pointer;
        padding: 10px;
        background-color: white;
        border: none;
        box-shadow: inset 0 0 3px 1px rgb(18, 83, 15);
      }

      .header input{
        padding: 8px;
        box-shadow: inset 0 0 3px 1px rgb(18, 83, 15);
        border: none;
        font-size: 1.2rem;
      }

      .header input:focus{

        outline: none;
        box-shadow: inset rgb(11, 94, 11) 0 0 5px 1px ;
      }
      .container{
        border-radius: 5px;
        transition: 1s;
        font-family: "Gowun Dodum", sans-serif;
        box-shadow: 0 10px 9px 5px rgba(0, 0, 0, 0.651);
        margin: 0;
        text-align: left;
        padding: 10px;
      }

      .container button{
        transition: 0.51s;
        border-radius: 5px;
        font-family: "Gowun Dodum", sans-serif;
        background-color: white;
        font-size: 1.1em;
        margin: 10px;
        border: none;
        padding: 5px;
        cursor: pointer;
      
      }
      .container button:hover{
        background: rgb(11, 150, 46);
        color:white;
      }
      .container:nth-of-type(2n){
        background: rgb(11, 150, 46);
        box-shadow: inset 0 0 5px 2px rgba(0, 0, 0, 0.493), inset 3px 8px 10px 4px rgba(0, 0, 0, 0.466);
        color:black;
        
      }
      .container:nth-of-type(2n) button{
        background-color: black; color:white;
      }

      .container:nth-of-type(2n) button:hover{
        background-color: rgb(103, 226, 86);
      }
      
    </style>
  </head>
  <body>
    <header class="header">
    <h1>할 일 목록</h1>
    <input id="user_input" type="text" />
    <button id="add_btn">추가하기</button>
    <button id="all_delbtn">전체삭제</button>
  <header/>

    <script>
      const input = document.getElementById("user_input");
      let ct;
      const button = document.getElementById("add_btn");
      const allDelBtn = document.getElementById("all_delbtn");

      button.addEventListener("click", () => {
        ct++;
        let content = input.value;
        console.log(content);

        if (content) {
          const div = document.createElement("div");
          const check = document.createElement("input");
          const span = document.createElement("span");
          const inbutton = document.createElement("button");


          div.setAttribute('class',"container")
          document.body.append(div);

          div.append(check, span, inbutton);
          inbutton.innerHTML = "삭제하기";
          check.setAttribute("type", "checkbox");
          span.innerHTML = content;
          input.value = "";
          content = "";
          const del = document.querySelector("." + ct);

          // 스타일 1
          // check.addEventListener("change", (e) => {
          //   if (e.currentTarget.checked) {
          //     span.style.textDecoration = "line-through";
          //   } else {
          //     span.style.textDecoration = "none";
          //   }
          // });

          //  스타일2
          check.addEventListener("change", (e) => {
            if (e.currentTarget.checked) {
              span.className = "check-ok";
              // 삭제 함수 호출
              return itemDelEvent();
            } else { 
              return span.className = "check-no";
            }
          });

          // 아이템 개별 삭제 함수
          function itemDelEvent() {
            inbutton.addEventListener("click", (e) => {
              check.checked && e.currentTarget.parentNode.remove();
            });
          }

          // 전체 삭제
          allDelBtn.addEventListener("click", () => {
            document.body.removeChild(div);
          });
        }
      });
    </script>
  </body>
</html>
